<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YCS 물류 시스템 - 주문 이력</title>
    <link rel="stylesheet" href="css/globals.css">
    <style>
        .page-container {
            background: var(--gray-50);
            min-height: 100vh;
            padding-bottom: 5rem;
        }
        
        .header {
            background: white;
            border-bottom: 1px solid var(--primary-100);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 40;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            width: 2.5rem;
            height: 2.5rem;
            background: var(--primary-500);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .header-info h1 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--primary-800);
            margin: 0;
        }
        
        .back-btn {
            background: none;
            border: 1px solid var(--primary-200);
            color: var(--primary-600);
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .back-btn:hover {
            background: var(--primary-50);
            border-color: var(--primary-300);
        }
        
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .filter-section {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        
        .filter-row {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .filter-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--gray-700);
        }
        
        .filter-select,
        .filter-input {
            padding: 0.75rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            min-width: 150px;
        }
        
        .filter-btn {
            background: var(--primary-500);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            margin-top: 1.5rem;
        }
        
        .filter-btn:hover {
            background: var(--primary-600);
        }
        
        .orders-section {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-800);
        }
        
        .results-count {
            font-size: 0.875rem;
            color: var(--gray-600);
        }
        
        .order-card {
            border: 1px solid var(--gray-200);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.2s ease;
        }
        
        .order-card:hover {
            border-color: var(--primary-300);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .order-number {
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-800);
            margin-bottom: 0.25rem;
        }
        
        .order-date {
            font-size: 0.875rem;
            color: var(--gray-600);
        }
        
        .order-status {
            text-align: right;
        }
        
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .status-requested {
            background: var(--warning-100);
            color: var(--warning-700);
        }
        
        .status-preparing {
            background: var(--primary-100);
            color: var(--primary-700);
        }
        
        .status-shipping {
            background: #f3f4f6;
            color: #8b5cf6;
        }
        
        .status-delivered {
            background: var(--success-100);
            color: var(--success-700);
        }
        
        .status-cancelled {
            background: var(--danger-100);
            color: var(--danger-700);
        }
        
        .order-amount {
            font-size: 0.875rem;
            color: var(--gray-600);
        }
        
        .order-items {
            margin-bottom: 1rem;
        }
        
        .order-summary {
            font-size: 0.875rem;
            color: var(--gray-700);
            line-height: 1.5;
        }
        
        .order-actions {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
        }
        
        .action-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }
        
        .btn-primary {
            background: var(--primary-500);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-600);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary-600);
            border: 1px solid var(--primary-300);
        }
        
        .btn-outline:hover {
            background: var(--primary-50);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }
        
        .pagination-btn {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--gray-300);
            background: white;
            color: var(--gray-700);
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
        }
        
        .pagination-btn:hover {
            background: var(--gray-50);
        }
        
        .pagination-btn.active {
            background: var(--primary-500);
            color: white;
            border-color: var(--primary-500);
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--gray-600);
        }
        
        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem 0.5rem;
            }
            
            .filter-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .filter-select,
            .filter-input {
                min-width: auto;
                width: 100%;
            }
            
            .order-header {
                flex-direction: column;
                gap: 1rem;
                text-align: left;
            }
            
            .order-status {
                text-align: left;
            }
            
            .order-actions {
                justify-content: flex-start;
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- 헤더 -->
        <div class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo">YCS</div>
                    <div class="header-info">
                        <h1>주문 이력</h1>
                    </div>
                </div>
                <button class="back-btn" onclick="window.history.back()">뒤로가기</button>
            </div>
        </div>
        
        <!-- 메인 콘텐츠 -->
        <div class="main-content">
            <!-- 필터 섹션 -->
            <div class="filter-section">
                <div class="filter-row">
                    <div class="filter-group">
                        <label class="filter-label">기간</label>
                        <select class="filter-select" id="periodFilter">
                            <option value="all">전체</option>
                            <option value="1month">최근 1개월</option>
                            <option value="3months">최근 3개월</option>
                            <option value="6months">최근 6개월</option>
                            <option value="1year">최근 1년</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">상태</label>
                        <select class="filter-select" id="statusFilter">
                            <option value="all">전체</option>
                            <option value="requested">요청</option>
                            <option value="preparing">준비중</option>
                            <option value="shipping">배송중</option>
                            <option value="delivered">배송완료</option>
                            <option value="cancelled">취소</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">주문번호</label>
                        <input type="text" class="filter-input" id="orderNumberFilter" placeholder="주문번호 검색">
                    </div>
                </div>
                
                <button class="filter-btn" onclick="applyFilters()">검색</button>
            </div>
            
            <!-- 주문 목록 -->
            <div class="orders-section">
                <div class="section-header">
                    <h2 class="section-title">주문 목록</h2>
                    <div class="results-count" id="resultsCount">총 8건</div>
                </div>
                
                <div id="ordersList">
                    <!-- 주문 카드들이 여기에 동적으로 생성됩니다 -->
                </div>
                
                <!-- 페이지네이션 -->
                <div class="pagination" id="pagination">
                    <!-- 페이지네이션이 여기에 동적으로 생성됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // 데모 주문 데이터
        const ordersData = [
            {
                id: 'YCS202401008',
                date: '2024-01-20',
                status: 'delivered',
                statusText: '배송완료',
                items: [
                    { name: '스마트폰 케이스', quantity: 2, price: 25000 },
                    { name: '무선 이어폰', quantity: 1, price: 150000 }
                ],
                total: 200000,
                recipient: '홍길동',
                address: '서울시 강남구 테헤란로 123'
            },
            {
                id: 'YCS202401007',
                date: '2024-01-18',
                status: 'shipping',
                statusText: '배송중',
                items: [
                    { name: '화장품 세트', quantity: 1, price: 80000 },
                    { name: '향수', quantity: 2, price: 120000 }
                ],
                total: 320000,
                recipient: '김영희',
                address: '부산시 해운대구 해운대로 456'
            },
            {
                id: 'YCS202401006',
                date: '2024-01-15',
                status: 'preparing',
                statusText: '준비중',
                items: [
                    { name: '운동화', quantity: 1, price: 180000 }
                ],
                total: 180000,
                recipient: '박민수',
                address: '대구시 중구 중앙로 789'
            },
            {
                id: 'YCS202401005',
                date: '2024-01-12',
                status: 'delivered',
                statusText: '배송완료',
                items: [
                    { name: '노트북 가방', quantity: 1, price: 90000 },
                    { name: '마우스 패드', quantity: 3, price: 45000 }
                ],
                total: 135000,
                recipient: '이수진',
                address: '인천시 남동구 논현로 321'
            },
            {
                id: 'YCS202401004',
                date: '2024-01-10',
                status: 'cancelled',
                statusText: '취소',
                items: [
                    { name: '블루투스 스피커', quantity: 2, price: 200000 }
                ],
                total: 400000,
                recipient: '최민호',
                address: '광주시 서구 상무대로 654'
            },
            {
                id: 'YCS202401003',
                date: '2024-01-08',
                status: 'delivered',
                statusText: '배송완료',
                items: [
                    { name: '의류 세트', quantity: 3, price: 150000 }
                ],
                total: 450000,
                recipient: '정영우',
                address: '대전시 유성구 대학로 987'
            },
            {
                id: 'YCS202401002',
                date: '2024-01-05',
                status: 'delivered',
                statusText: '배송완료',
                items: [
                    { name: '건강 보조식품', quantity: 2, price: 120000 }
                ],
                total: 240000,
                recipient: '김영희',
                address: '울산시 남구 삼산로 147'
            },
            {
                id: 'YCS202401001',
                date: '2024-01-03',
                status: 'delivered',
                statusText: '배송완료',
                items: [
                    { name: '전자책 리더기', quantity: 1, price: 300000 }
                ],
                total: 300000,
                recipient: '홍길동',
                address: '세종시 한누리대로 258'
            }
        ];

        let filteredOrders = [...ordersData];
        let currentPage = 1;
        const itemsPerPage = 5;

        function renderOrders() {
            const ordersList = document.getElementById('ordersList');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentOrders = filteredOrders.slice(startIndex, endIndex);

            if (currentOrders.length === 0) {
                ordersList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">📦</div>
                        <h3>주문 내역이 없습니다</h3>
                        <p>검색 조건을 변경하거나 새로운 주문을 생성해보세요.</p>
                    </div>
                `;
                return;
            }

            ordersList.innerHTML = currentOrders.map(order => {
                const itemsSummary = order.items.length > 1 
                    ? `${order.items[0].name} 외 ${order.items.length - 1}건`
                    : order.items[0].name;
                
                return `
                    <div class="order-card">
                        <div class="order-header">
                            <div>
                                <div class="order-number">${order.id}</div>
                                <div class="order-date">${order.date}</div>
                            </div>
                            <div class="order-status">
                                <div class="status-badge status-${order.status}">${order.statusText}</div>
                                <div class="order-amount">${order.total.toLocaleString()}원</div>
                            </div>
                        </div>
                        
                        <div class="order-items">
                            <div class="order-summary">
                                <strong>${itemsSummary}</strong><br>
                                수취인: ${order.recipient}<br>
                                배송지: ${order.address}
                            </div>
                        </div>
                        
                        <div class="order-actions">
                            <button class="action-btn btn-outline" onclick="viewOrderDetail('${order.id}')">
                                상세보기
                            </button>
                            ${order.status !== 'cancelled' && order.status !== 'delivered' ? `
                                <button class="action-btn btn-primary" onclick="trackOrder('${order.id}')">
                                    배송추적
                                </button>
                            ` : ''}
                            ${order.status === 'delivered' ? `
                                <button class="action-btn btn-primary" onclick="reorder('${order.id}')">
                                    재주문
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');

            // 결과 개수 업데이트
            document.getElementById('resultsCount').textContent = `총 ${filteredOrders.length}건`;
            
            renderPagination();
        }

        function renderPagination() {
            const pagination = document.getElementById('pagination');
            const totalPages = Math.ceil(filteredOrders.length / itemsPerPage);
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let paginationHTML = '';
            
            // 이전 버튼
            if (currentPage > 1) {
                paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage - 1})">이전</button>`;
            }
            
            // 페이지 번호들
            for (let i = 1; i <= totalPages; i++) {
                const activeClass = i === currentPage ? 'active' : '';
                paginationHTML += `<button class="pagination-btn ${activeClass}" onclick="changePage(${i})">${i}</button>`;
            }
            
            // 다음 버튼
            if (currentPage < totalPages) {
                paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage + 1})">다음</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            currentPage = page;
            renderOrders();
        }

        function applyFilters() {
            const period = document.getElementById('periodFilter').value;
            const status = document.getElementById('statusFilter').value;
            const orderNumber = document.getElementById('orderNumberFilter').value.toLowerCase();
            
            filteredOrders = ordersData.filter(order => {
                // 기간 필터
                if (period !== 'all') {
                    const orderDate = new Date(order.date);
                    const now = new Date();
                    const monthsAgo = period === '1month' ? 1 : 
                                     period === '3months' ? 3 : 
                                     period === '6months' ? 6 : 12;
                    
                    const filterDate = new Date();
                    filterDate.setMonth(filterDate.getMonth() - monthsAgo);
                    
                    if (orderDate < filterDate) return false;
                }
                
                // 상태 필터
                if (status !== 'all' && order.status !== status) return false;
                
                // 주문번호 필터
                if (orderNumber && !order.id.toLowerCase().includes(orderNumber)) return false;
                
                return true;
            });
            
            currentPage = 1;
            renderOrders();
        }

        function viewOrderDetail(orderId) {
            // 주문 상세 페이지로 이동
            window.location.href = `order-detail.html?id=${orderId}`;
        }

        function trackOrder(orderId) {
            // 주문 추적 페이지로 이동
            window.location.href = `order-tracking.html?order=${orderId}`;
        }

        function reorder(orderId) {
            const order = ordersData.find(o => o.id === orderId);
            if (order) {
                const confirmed = confirm(`${order.items[0].name} ${order.items.length > 1 ? '외 ' + (order.items.length - 1) + '건' : ''}을 재주문하시겠습니까?`);
                if (confirmed) {
                    alert('재주문이 처리되었습니다.');
                    // 실제로는 주문 페이지로 이동하거나 장바구니에 추가
                }
            }
        }

        // 페이지 로드 시 초기 렌더링
        window.addEventListener('load', function() {
            renderOrders();
        });
    </script>
</body>
</html>