<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 주문 상세 - YCS 물류관리 시스템</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .shadow-blue { box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1), 0 2px 4px -1px rgba(59, 130, 246, 0.06); }
        .border-blue-100 { border-color: rgb(219 234 254); }
        .bg-gradient-primary { background: linear-gradient(135deg, #3B82F6 0%, #1E40AF 100%); }
        .text-blue-900 { color: rgb(30 58 138); }
        .text-blue-800 { color: rgb(30 64 175); }
        .text-blue-700 { color: rgb(29 78 216); }
        .text-blue-600 { color: rgb(37 99 235); }
        .text-blue-500 { color: rgb(59 130 246); }
        .hover\:bg-blue-50:hover { background-color: rgb(239 246 255); }
        .bg-blue-50 { background-color: rgb(239 246 255); }
        .animate-bounce { animation: bounce 1s infinite; }
        .animate-spin { animation: spin 1s linear infinite; }
        
        @keyframes bounce { 0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8,0,1,1); } 50% { transform: none; animation-timing-function: cubic-bezier(0,0,0.2,1); } }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid;
        }
        
        .badge-green { background: rgb(240 253 244); color: rgb(21 128 61); border-color: rgb(187 247 208); }
        .badge-yellow { background: rgb(254 252 232); color: rgb(161 98 7); border-color: rgb(254 240 138); }
        .badge-red { background: rgb(254 242 242); color: rgb(185 28 28); border-color: rgb(254 202 202); }
        .badge-blue { background: rgb(239 246 255); color: rgb(29 78 216); border-color: rgb(191 219 254); }
        .badge-purple { background: rgb(250 245 255); color: rgb(126 34 206); border-color: rgb(221 214 254); }
        .badge-orange { background: rgb(255 247 237); color: rgb(194 65 12); border-color: rgb(254 215 170); }
        .badge-outline { background: transparent; color: rgb(75 85 99); border-color: rgb(209 213 219); }
        
        .card {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgb(219 234 254);
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
        }
        
        .card-header {
            margin-bottom: 1.5rem;
        }
        
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: rgb(30 58 138);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .card-description {
            color: rgb(75 85 99);
            font-size: 0.875rem;
        }
        
        .separator {
            height: 1px;
            background: rgb(229 231 235);
            margin: 1.5rem 0;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th,
        .table td {
            padding: 0.75rem 0.5rem;
            text-align: left;
        }
        
        .table th {
            font-weight: 500;
            font-size: 0.875rem;
            color: rgb(30 58 138);
            border-bottom: 1px solid rgb(191 219 254);
        }
        
        .table td {
            border-bottom: 1px solid rgb(239 246 255);
        }
        
        .table tbody tr:hover {
            background: rgba(239, 246, 255, 0.3);
        }
        
        .table tfoot tr {
            border-top: 2px solid rgb(147 197 253);
            background: rgba(239, 246, 255, 0.5);
        }
        
        .table tfoot td {
            font-weight: 600;
            color: rgb(30 58 138);
        }
        
        .schedule-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .schedule-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid;
        }
        
        .schedule-icon.completed {
            background: rgb(240 253 244);
            border-color: rgb(134 239 172);
        }
        
        .schedule-icon.pending {
            background: rgb(239 246 255);
            border-color: rgb(191 219 254);
        }
        
        .button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
        }
        
        .button-outline {
            background: transparent;
            color: rgb(29 78 216);
            border-color: rgb(147 197 253);
        }
        
        .button-outline:hover {
            background: rgb(239 246 255);
        }
        
        .loading-screen {
            min-height: 100vh;
            background: linear-gradient(135deg, rgb(239 246 255) 0%, white 50%, rgb(239 246 255) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .error-screen {
            min-height: 100vh;
            background: linear-gradient(135deg, rgb(239 246 255) 0%, white 50%, rgb(239 246 255) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
    </style>
</head>
<body>
    <!-- 로딩 화면 -->
    <div id="loading" class="loading-screen">
        <div class="text-center">
            <div class="w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce">
                <div class="w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
            </div>
            <p class="text-blue-600 font-medium">주문 정보를 불러오는 중...</p>
        </div>
    </div>

    <!-- 에러 화면 -->
    <div id="error" class="error-screen hidden">
        <div class="text-center max-w-md">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="h-10 w-10 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                </svg>
            </div>
            <h2 class="text-2xl font-bold text-blue-900 mb-4">주문을 찾을 수 없습니다</h2>
            <p class="text-blue-600 mb-6">요청하신 주문 정보를 찾을 수 없습니다.</p>
            <button id="back-to-orders" class="button button-outline">
                주문 관리로 돌아가기
            </button>
        </div>
    </div>

    <!-- 메인 컨텐츠 -->
    <div id="main-content" class="hidden min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100">
        <!-- 헤더 -->
        <header class="bg-white border-b border-blue-100 shadow-sm">
            <div class="flex items-center justify-between px-4 py-3">
                <div class="flex items-center gap-3">
                    <button id="back-button" class="p-2 text-blue-600/60 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-all opacity-60 hover:opacity-100" aria-label="주문 관리로 돌아가기">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <div class="w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center shadow-blue">
                        <svg class="h-5 w-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="font-semibold text-blue-900">주문 상세정보</h1>
                        <p class="text-xs text-blue-600" id="order-number-header"></p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <span id="status-badge" class="badge"></span>
                </div>
            </div>
        </header>

        <div class="p-4 max-w-6xl mx-auto space-y-6">
            <!-- 주문 기본 정보 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                        </svg>
                        주문 정보
                    </div>
                    <div class="card-description">주문 기본 정보 및 배송 현황</div>
                </div>
                
                <!-- 기본 정보 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path>
                            </svg>
                            <span>주문번호</span>
                        </div>
                        <p id="order-number" class="font-medium text-blue-900"></p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            <span>주문일자</span>
                        </div>
                        <p id="order-date" class="font-medium text-blue-900"></p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>도착예정일</span>
                        </div>
                        <p id="expected-date" class="font-medium text-blue-900"></p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0121 12a11.955 11.955 0 01-2.382 7.016m0 0A11.955 11.955 0 0112 21.5a11.955 11.955 0 01-6.618-1.984m0 0A11.955 11.955 0 013 12a11.955 11.955 0 012.382-7.016"></path>
                            </svg>
                            <span>배송유형</span>
                        </div>
                        <p id="delivery-type" class="font-medium text-blue-900"></p>
                    </div>
                </div>

                <div class="separator"></div>

                <!-- 배송 스케줄 -->
                <div>
                    <h4 class="font-medium text-blue-900 mb-4">배송 스케줄</h4>
                    <div id="schedule-list" class="space-y-4"></div>
                </div>
            </div>

            <!-- 고객 정보 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        고객 정보
                    </div>
                    <div class="card-description">주문자 정보</div>
                </div>
                
                <div id="customer-info" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>

                <!-- 요청사항 -->
                <div id="requirements-section" class="hidden">
                    <div class="separator"></div>
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <span>요청사항</span>
                        </div>
                        <div class="p-3 bg-blue-50/30 border border-blue-200 rounded-lg">
                            <p id="requirements-text" class="text-blue-900"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 이용내역 (결제 정보) -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                        </svg>
                        이용내역
                    </div>
                    <div class="card-description">결제 정보 및 총 금액</div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                            <span>총 결제금액</span>
                        </div>
                        <p id="total-amount" class="font-semibold text-lg text-blue-900"></p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                            </svg>
                            <span>결제수단</span>
                        </div>
                        <p id="payment-method" class="font-medium text-blue-900"></p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>결제상태</span>
                        </div>
                        <span id="payment-status" class="badge badge-green"></span>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            <span>결제일</span>
                        </div>
                        <p id="payment-date" class="font-medium text-blue-900"></p>
                    </div>
                </div>
            </div>

            <!-- 내품정보 테이블 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M8 11v6h8v-6M8 11h8"></path>
                        </svg>
                        내품정보
                    </div>
                    <div class="card-description">상품별 상세정보 및 세금 계산</div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>내품명</th>
                                <th class="text-center">수량</th>
                                <th class="text-center">신고가(USD)</th>
                                <th class="text-center">발송구분</th>
                                <th class="text-center">송장번호</th>
                                <th class="text-center">TAX 7%</th>
                            </tr>
                        </thead>
                        <tbody id="items-table-body"></tbody>
                        <tfoot>
                            <tr>
                                <td class="font-semibold text-blue-900">합계</td>
                                <td id="total-quantity" class="text-center font-medium text-blue-900"></td>
                                <td id="total-declared-value" class="text-center"></td>
                                <td></td>
                                <td></td>
                                <td id="total-tax" class="text-center"></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <!-- 환율 정보 -->
                <div class="mt-4 p-3 bg-blue-50/30 border border-blue-200 rounded-lg">
                    <div class="flex items-center gap-2 text-sm text-blue-600 mb-1">
                        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                        <span>환율 정보</span>
                    </div>
                    <p class="text-sm text-blue-700">
                        USD 1 = KRW <span id="exchange-rate">1,350</span> (참고용)
                    </p>
                </div>
            </div>

            <!-- 하단 액션 버튼 -->
            <div class="flex gap-4 justify-center pb-8">
                <button id="back-to-orders-btn" class="button button-outline">
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    주문 관리로 돌아가기
                </button>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentOrderId = null;
        let exchangeRate = 1350;

        // Mock 데이터
        const mockOrderData = {
            'ORD-2024-001': {
                orderNumber: 'ORD-2024-001',
                orderDate: '2024-01-10',
                expectedDate: '2024-01-15',
                status: 'pending',
                deliveryType: '일반배송',
                schedule: [
                    { date: '2024-01-10', status: 'ordered', label: '주문접수', completed: true },
                    { date: '2024-01-12', status: 'processing', label: '상품준비중', completed: true },
                    { date: '2024-01-14', status: 'shipping', label: '배송중', completed: false },
                    { date: '2024-01-15', status: 'delivered', label: '배송완료', completed: false }
                ],
                customer: {
                    type: 'corporate',
                    id: 'CUST-123456',
                    email: 'company@example.com',
                    phone: '02-1234-5678',
                    companyName: '(주)테스트기업',
                    businessNumber: '123-45-67890',
                    contactName: '김담당',
                    contactPhone: '010-1234-5678'
                },
                requirements: '깨지기 쉬운 상품이므로 포장에 주의해주세요.',
                billing: {
                    totalAmount: 1250000,
                    currency: 'KRW',
                    paymentMethod: '법인카드',
                    paymentStatus: '결제완료',
                    paymentDate: '2024-01-10'
                },
                items: [
                    {
                        id: 'ITEM-001',
                        name: '노트북 컴퓨터',
                        quantity: 2,
                        declaredValue: 800,
                        category: '전자제품',
                        weight: '2.5kg',
                        trackingNumber: 'TRK-001-2024',
                        shippingType: '항공'
                    },
                    {
                        id: 'ITEM-002',
                        name: '무선마우스',
                        quantity: 5,
                        declaredValue: 25,
                        category: '전자제품',
                        weight: '0.1kg',
                        trackingNumber: 'TRK-002-2024',
                        shippingType: '항공'
                    }
                ]
            },
            'ORD-2024-002': {
                orderNumber: 'ORD-2024-002',
                orderDate: '2024-01-12',
                expectedDate: '2024-01-17',
                status: 'confirmed',
                deliveryType: '특급배송',
                schedule: [
                    { date: '2024-01-12', status: 'ordered', label: '주문접수', completed: true },
                    { date: '2024-01-13', status: 'processing', label: '상품준비중', completed: true },
                    { date: '2024-01-15', status: 'shipping', label: '배송중', completed: true },
                    { date: '2024-01-17', status: 'delivered', label: '배송완료', completed: false }
                ],
                customer: {
                    type: 'individual',
                    id: 'CUST-789012',
                    email: 'individual@example.com',
                    phone: '010-9876-5432',
                    name: '이영희'
                },
                requirements: '부재 시 경비실에 맡겨주세요.',
                billing: {
                    totalAmount: 350000,
                    currency: 'KRW',
                    paymentMethod: '신용카드',
                    paymentStatus: '결제완료',
                    paymentDate: '2024-01-12'
                },
                items: [
                    {
                        id: 'ITEM-003',
                        name: '무선 이어폰',
                        quantity: 1,
                        declaredValue: 150,
                        category: '전자제품',
                        weight: '0.2kg',
                        trackingNumber: 'TRK-003-2024',
                        shippingType: '항공'
                    }
                ]
            },
            'ORD-2024-003': {
                orderNumber: 'ORD-2024-003',
                orderDate: '2024-01-14',
                expectedDate: '2024-01-19',
                status: 'pending',
                deliveryType: '일반배송',
                schedule: [
                    { date: '2024-01-14', status: 'ordered', label: '주문접수', completed: true },
                    { date: '2024-01-16', status: 'processing', label: '상품준비중', completed: false },
                    { date: '2024-01-18', status: 'shipping', label: '배송중', completed: false },
                    { date: '2024-01-19', status: 'delivered', label: '배송완료', completed: false }
                ],
                customer: {
                    type: 'individual',
                    id: 'CUST-345678',
                    email: 'park@example.com',
                    phone: '010-5555-6666',
                    name: '박민수'
                },
                requirements: '직장으로 배송 부탁드립니다.',
                billing: {
                    totalAmount: 850000,
                    currency: 'KRW',
                    paymentMethod: '계좌이체',
                    paymentStatus: '결제완료',
                    paymentDate: '2024-01-14'
                },
                items: [
                    {
                        id: 'ITEM-004',
                        name: '스마트폰 케이스',
                        quantity: 10,
                        declaredValue: 15,
                        category: '액세서리',
                        weight: '0.1kg',
                        trackingNumber: 'TRK-004-2024',
                        shippingType: '선박'
                    },
                    {
                        id: 'ITEM-005',
                        name: '블루투스 스피커',
                        quantity: 3,
                        declaredValue: 80,
                        category: '전자제품',
                        weight: '1.2kg',
                        trackingNumber: 'TRK-005-2024',
                        shippingType: '항공'
                    }
                ]
            }
        };

        // 유틸리티 함수
        function getStatusBadge(status) {
            const statusMap = {
                'confirmed': { class: 'badge-green', text: '확인됨' },
                'pending': { class: 'badge-yellow', text: '대기중' },
                'rejected': { class: 'badge-red', text: '거부됨' },
                'delivered': { class: 'badge-blue', text: '배송완료' },
                'shipping': { class: 'badge-purple', text: '배송중' },
                'processing': { class: 'badge-orange', text: '처리중' }
            };
            
            const badge = statusMap[status] || { class: 'badge-outline', text: status };
            return `<span class="badge ${badge.class}">${badge.text}</span>`;
        }

        function getScheduleIcon(status, completed) {
            const iconClass = completed ? 'text-green-600' : 'text-blue-300';
            
            const icons = {
                'ordered': `<svg class="h-5 w-5 ${iconClass}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>`,
                'processing': `<svg class="h-5 w-5 ${iconClass}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>`,
                'shipping': `<svg class="h-5 w-5 ${iconClass}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0121 12a11.955 11.955 0 01-2.382 7.016m0 0A11.955 11.955 0 0112 21.5a11.955 11.955 0 01-6.618-1.984m0 0A11.955 11.955 0 013 12a11.955 11.955 0 012.382-7.016"></path></svg>`,
                'delivered': `<svg class="h-5 w-5 ${iconClass}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`
            };
            
            return icons[status] || `<svg class="h-5 w-5 ${iconClass}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
        }

        function calculateTax(usdAmount) {
            return Math.round(usdAmount * 0.07 * 100) / 100;
        }

        function calculateTotalDeclaredValue(items) {
            return items.reduce((total, item) => total + (item.declaredValue * item.quantity), 0);
        }

        function calculateTotalTax(items) {
            const totalDeclared = calculateTotalDeclaredValue(items);
            return calculateTax(totalDeclared);
        }

        // 렌더링 함수들
        function renderBasicInfo(orderData) {
            document.getElementById('order-number-header').textContent = orderData.orderNumber;
            document.getElementById('order-number').textContent = orderData.orderNumber;
            document.getElementById('order-date').textContent = orderData.orderDate;
            document.getElementById('expected-date').textContent = orderData.expectedDate;
            document.getElementById('delivery-type').textContent = orderData.deliveryType;
            document.getElementById('status-badge').outerHTML = getStatusBadge(orderData.status);
        }

        function renderSchedule(schedule) {
            const scheduleHtml = schedule.map(step => `
                <div class="schedule-item">
                    <div class="schedule-icon ${step.completed ? 'completed' : 'pending'}">
                        ${getScheduleIcon(step.status, step.completed)}
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between">
                            <h5 class="font-medium ${step.completed ? 'text-green-800' : 'text-blue-700'}">
                                ${step.label}
                            </h5>
                            <span class="text-sm text-blue-600">${step.date}</span>
                        </div>
                        ${step.completed ? '<p class="text-sm text-green-600 mt-1">완료됨</p>' : ''}
                    </div>
                </div>
            `).join('');
            
            document.getElementById('schedule-list').innerHTML = scheduleHtml;
        }

        function renderCustomerInfo(customer) {
            let customerHtml = `
                <div class="space-y-4">
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path>
                            </svg>
                            <span>고객 ID</span>
                        </div>
                        <p class="font-medium text-blue-900">${customer.id}</p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            <span>이메일</span>
                        </div>
                        <p class="font-medium text-blue-900">${customer.email}</p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm text-blue-600">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                            <span>연락처</span>
                        </div>
                        <p class="font-medium text-blue-900">${customer.phone}</p>
                    </div>
                </div>
            `;

            if (customer.type === 'corporate') {
                customerHtml += `
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <div class="flex items-center gap-2 text-sm text-blue-600">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m0 0h4M9 7h6m-6 4h6m-6 4h6"></path>
                                </svg>
                                <span>회사명</span>
                            </div>
                            <p class="font-medium text-blue-900">${customer.companyName}</p>
                        </div>
                        
                        <div class="space-y-2">
                            <div class="flex items-center gap-2 text-sm text-blue-600">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                <span>사업자등록번호</span>
                            </div>
                            <p class="font-medium text-blue-900">${customer.businessNumber}</p>
                        </div>
                        
                        <div class="space-y-2">
                            <div class="flex items-center gap-2 text-sm text-blue-600">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                <span>담당자명</span>
                            </div>
                            <p class="font-medium text-blue-900">${customer.contactName}</p>
                        </div>
                        
                        <div class="space-y-2">
                            <div class="flex items-center gap-2 text-sm text-blue-600">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                </svg>
                                <span>담당자 연락처</span>
                            </div>
                            <p class="font-medium text-blue-900">${customer.contactPhone}</p>
                        </div>
                    </div>
                `;
            } else {
                customerHtml += `
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <div class="flex items-center gap-2 text-sm text-blue-600">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                <span>고객명</span>
                            </div>
                            <p class="font-medium text-blue-900">${customer.name}</p>
                        </div>
                    </div>
                `;
            }

            document.getElementById('customer-info').innerHTML = customerHtml;
        }

        function renderRequirements(requirements) {
            if (requirements) {
                document.getElementById('requirements-section').classList.remove('hidden');
                document.getElementById('requirements-text').textContent = requirements;
            }
        }

        function renderBillingInfo(billing) {
            document.getElementById('total-amount').textContent = `₩${billing.totalAmount.toLocaleString()}`;
            document.getElementById('payment-method').textContent = billing.paymentMethod;
            document.getElementById('payment-status').outerHTML = `<span class="badge badge-green">${billing.paymentStatus}</span>`;
            document.getElementById('payment-date').textContent = billing.paymentDate;
        }

        function renderItemsTable(items) {
            const itemsHtml = items.map((item, index) => `
                <tr>
                    <td>
                        <div>
                            <p class="font-medium text-blue-900">${item.name}</p>
                            <p class="text-sm text-blue-600">${item.category} | ${item.weight}</p>
                        </div>
                    </td>
                    <td class="text-center font-medium text-blue-900">
                        ${item.quantity}
                    </td>
                    <td class="text-center">
                        <div>
                            <p class="font-medium text-blue-900">$${item.declaredValue}</p>
                            <p class="text-xs text-blue-600">
                                (₩${(item.declaredValue * exchangeRate).toLocaleString()})
                            </p>
                        </div>
                    </td>
                    <td class="text-center">
                        <span class="badge badge-outline text-blue-700 border-blue-300">
                            ${item.shippingType}
                        </span>
                    </td>
                    <td class="text-center font-mono text-sm text-blue-900">
                        ${item.trackingNumber}
                    </td>
                    <td class="text-center">
                        <div>
                            <p class="font-medium text-blue-900">
                                $${calculateTax(item.declaredValue * item.quantity)}
                            </p>
                            <p class="text-xs text-blue-600">
                                (₩${(calculateTax(item.declaredValue * item.quantity) * exchangeRate).toLocaleString()})
                            </p>
                        </div>
                    </td>
                </tr>
            `).join('');

            document.getElementById('items-table-body').innerHTML = itemsHtml;

            // 합계 계산
            const totalQuantity = items.reduce((total, item) => total + item.quantity, 0);
            const totalDeclaredValue = calculateTotalDeclaredValue(items);
            const totalTax = calculateTotalTax(items);

            document.getElementById('total-quantity').textContent = totalQuantity;
            document.getElementById('total-declared-value').innerHTML = `
                <div>
                    <p class="font-semibold text-blue-900">$${totalDeclaredValue}</p>
                    <p class="text-xs text-blue-600">
                        (₩${(totalDeclaredValue * exchangeRate).toLocaleString()})
                    </p>
                </div>
            `;
            document.getElementById('total-tax').innerHTML = `
                <div>
                    <p class="font-semibold text-blue-900">$${totalTax}</p>
                    <p class="text-xs text-blue-600">
                        (₩${(totalTax * exchangeRate).toLocaleString()})
                    </p>
                </div>
            `;

            document.getElementById('exchange-rate').textContent = exchangeRate.toLocaleString();
        }

        // 메인 렌더링 함수
        function renderOrderDetail(orderData) {
            renderBasicInfo(orderData);
            renderSchedule(orderData.schedule);
            renderCustomerInfo(orderData.customer);
            renderRequirements(orderData.requirements);
            renderBillingInfo(orderData.billing);
            renderItemsTable(orderData.items);
        }

        // 주문 데이터 로드
        function loadOrderData(orderId) {
            // 로딩 화면 표시
            document.getElementById('loading').style.display = 'flex';
            document.getElementById('main-content').classList.add('hidden');
            document.getElementById('error').classList.add('hidden');

            // 모의 데이터 로딩 (1초 후)
            setTimeout(() => {
                const orderData = mockOrderData[orderId];
                
                if (orderData) {
                    renderOrderDetail(orderData);
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('main-content').classList.remove('hidden');
                } else {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('error').classList.remove('hidden');
                }
            }, 1000);
        }

        // 이벤트 리스너 설정
        function setupEventListeners() {
            // 뒤로가기 버튼들
            document.getElementById('back-button').addEventListener('click', () => {
                window.location.href = 'admin-order-management.html';
            });

            document.getElementById('back-to-orders').addEventListener('click', () => {
                window.location.href = 'admin-order-management.html';
            });

            document.getElementById('back-to-orders-btn').addEventListener('click', () => {
                window.location.href = 'admin-order-management.html';
            });
        }

        // 페이지 초기화
        function initializePage() {
            setupEventListeners();
            
            // URL 파라미터에서 orderId 가져오기
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('orderId') || 'ORD-2024-001'; // 기본값
            
            currentOrderId = orderId;
            loadOrderData(orderId);
        }

        // 페이지 로드 완료 시 초기화
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>