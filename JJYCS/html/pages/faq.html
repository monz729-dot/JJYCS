<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자주 묻는 질문 (FAQ) - YSC 물류 시스템</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
    <style>
        .shadow-blue {
            box-shadow: 0 4px 14px -2px rgba(59, 130, 246, 0.15);
        }

        .accordion-item {
            border: 1px solid #dbeafe;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .accordion-item:hover {
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        .accordion-trigger {
            width: 100%;
            padding: 1rem;
            background: white;
            border: none;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .accordion-trigger:hover {
            background-color: #f8fafc;
        }

        .accordion-trigger.active {
            background-color: #eff6ff;
            color: #1d4ed8;
        }

        .accordion-content {
            display: none;
            padding: 1rem;
            background-color: #fafbff;
            border-top: 1px solid #e5e7eb;
        }

        .accordion-content.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .accordion-arrow {
            transition: transform 0.3s ease;
        }

        .accordion-arrow.rotate {
            transform: rotate(180deg);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .badge {
            display: inline-flex;
            align-items: center;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border: 1px solid #d1d5db;
            background-color: white;
            color: #6b7280;
        }

        .category-button {
            transition: all 0.3s ease;
        }

        .category-button.active {
            background-color: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .category-button:not(.active) {
            background-color: white;
            color: #2563eb;
            border: 1px solid #d1d5db;
        }

        .category-button:not(.active):hover {
            background-color: #f3f4f6;
            border-color: #9ca3af;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-blue-100 min-h-screen">
    <div class="p-4 space-y-6">
        <!-- 헤더 -->
        <div class="flex items-center gap-4 mb-6">
            <button
                onclick="navigateBack()"
                class="flex items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors"
            >
                <i data-lucide="arrow-left" class="h-4 w-4"></i>
                돌아가기
            </button>
            <div>
                <h1 class="text-xl text-blue-900">자주 묻는 질문 (FAQ)</h1>
                <p id="faqSubtitle" class="text-sm text-blue-600">전체 대상 FAQ - 총 0개</p>
            </div>
        </div>

        <!-- 사용자 정보 카드 -->
        <div id="userInfoCard" class="bg-white rounded-lg shadow-blue border border-blue-100 bg-blue-50/30 p-6">
            <div class="flex items-center gap-2 mb-4">
                <i id="userIcon" data-lucide="user" class="h-5 w-5 text-blue-900"></i>
                <h3 id="userCardTitle" class="text-lg font-semibold text-blue-900">개인 고객 맞춤 FAQ</h3>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <p id="userNameLabel" class="text-sm text-blue-700">고객명</p>
                    <p id="userName" class="font-medium">김민수</p>
                </div>
                <div>
                    <p id="userTypeLabel" class="text-sm text-blue-700">고객 유형</p>
                    <span id="userTypeBadge" class="badge border-blue-300 text-blue-700">개인 고객</span>
                </div>
                <div>
                    <p id="customFaqLabel" class="text-sm text-blue-700">맞춤 FAQ</p>
                    <p id="customFaqCount" class="font-medium text-blue-600">0개 제공</p>
                </div>
            </div>
        </div>

        <!-- 검색 -->
        <div class="bg-white rounded-lg shadow-blue border border-blue-100 p-4">
            <div class="relative">
                <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-blue-600/60"></i>
                <input
                    type="text"
                    id="searchInput"
                    placeholder="질문 내용으로 검색..."
                    class="w-full pl-10 h-12 border border-blue-200 focus:border-blue-500 focus:ring-blue-200 rounded-md"
                    oninput="handleSearch()"
                />
            </div>
        </div>

        <!-- 카테고리 필터 -->
        <div class="bg-white rounded-lg shadow-blue border border-blue-100 p-4">
            <div id="categoryFilters" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3">
                <!-- 카테고리 버튼들이 여기에 동적으로 생성됩니다 -->
            </div>
        </div>

        <!-- FAQ 목록 -->
        <div id="faqContainer">
            <!-- FAQ 카드가 여기에 동적으로 생성됩니다 -->
        </div>

        <!-- 고객센터 연락처 -->
        <div class="bg-white rounded-lg shadow-blue border border-green-100 bg-green-50/30 p-6">
            <div class="flex items-center gap-2 mb-4">
                <i data-lucide="message-circle" class="h-5 w-5 text-green-900"></i>
                <h3 class="text-lg font-semibold text-green-900">추가 문의가 있으신가요?</h3>
            </div>
            <div class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="flex items-center gap-3 bg-white p-4 rounded-lg border border-green-200">
                        <i data-lucide="phone" class="h-5 w-5 text-green-600"></i>
                        <div>
                            <p class="font-medium text-green-900">고객센터 전화</p>
                            <p class="text-green-700">1588-0000</p>
                            <p class="text-xs text-green-600">평일 09:00 ~ 18:00</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 bg-white p-4 rounded-lg border border-green-200">
                        <i data-lucide="message-circle" class="h-5 w-5 text-green-600"></i>
                        <div>
                            <p class="font-medium text-green-900">이메일 문의</p>
                            <p class="text-green-700">support@ycs-logistics.com</p>
                            <p class="text-xs text-green-600">24시간 접수 가능</p>
                        </div>
                    </div>
                </div>
                <div class="text-sm text-green-800 bg-white p-3 rounded-lg border border-green-200">
                    <p class="font-medium mb-2">문의 시 필요한 정보:</p>
                    <ul class="space-y-1 text-xs">
                        <li>• 고객명 및 연락처</li>
                        <li id="inquiryInfo">• 회원 이메일 주소</li>
                        <li>• 주문번호 (배송 관련 문의 시)</li>
                        <li>• 구체적인 문의 내용</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 하단 여백 -->
        <div class="pb-20"></div>
    </div>

    <script>
        // 전역 변수
        let currentUser = {
            name: '김민수',
            type: 'general' // 'general', 'corporate', 'admin', 'partner'
        };
        let searchTerm = '';
        let selectedCategory = 'all';
        let faqs = [];

        // FAQ 데이터 초기화
        function initializeFAQs() {
            faqs = [
                // 개인 고객 전용 FAQ
                {
                    id: 'general-001',
                    question: '개인 고객도 국제 배송을 이용할 수 있나요?',
                    answer: '네, 개인 고객도 국제 배송 서비스를 이용하실 수 있습니다. 소량 배송부터 가능하며, 개인 통관 절차를 도와드립니다. 배송비는 무게와 부피에 따라 계산되며, 온라인에서 간편하게 견적을 확인할 수 있습니다.',
                    category: 'shipping',
                    targetUsers: ['general'],
                    priority: 1,
                    views: 1250
                },
                {
                    id: 'general-002',
                    question: '개인 고객 할인 혜택은 어떤 것이 있나요?',
                    answer: '개인 고객을 위한 다양한 할인 혜택을 제공합니다. 첫 주문 시 20% 할인, 월 5회 이상 이용 시 15% 할인, 추천인 제도를 통한 추가 할인 등이 있습니다. 마이페이지에서 현재 이용 가능한 쿠폰을 확인하실 수 있습니다.',
                    category: 'billing',
                    targetUsers: ['general'],
                    priority: 2,
                    views: 890
                },
                {
                    id: 'general-003',
                    question: '소량 배송도 안전하게 포장해주나요?',
                    answer: '물론입니다. 개인 고객의 소량 배송도 전문 포장재를 사용하여 안전하게 포장해드립니다. 깨지기 쉬운 물품은 에어캡과 충격 완충재를 추가로 사용하며, 배송 중 손상 시 보상도 가능합니다.',
                    category: 'service',
                    targetUsers: ['general'],
                    priority: 3,
                    views: 650
                },
                
                // 기업 고객 전용 FAQ
                {
                    id: 'corporate-001',
                    question: '기업 고객 전용 대량 배송 할인은 얼마나 되나요?',
                    answer: '기업 고객 대량 배송 할인은 월 배송량에 따라 차등 적용됩니다. 월 100건 이상 시 10%, 500건 이상 시 15%, 1000건 이상 시 20% 할인을 제공합니다. 또한 연간 계약 시 추가 5% 할인 혜택이 있습니다.',
                    category: 'billing',
                    targetUsers: ['corporate'],
                    priority: 1,
                    views: 420
                },
                {
                    id: 'corporate-002',
                    question: '기업 전담 매니저 서비스는 어떤 내용인가요?',
                    answer: '월 300건 이상 이용하는 기업 고객에게는 전담 매니저를 배정해드립니다. 전담 매니저는 배송 일정 관리, 특별 요청 처리, 월별 리포트 제공, 비용 최적화 컨설팅 등의 서비스를 제공합니다.',
                    category: 'service',
                    targetUsers: ['corporate'],
                    priority: 2,
                    views: 380
                },
                {
                    id: 'corporate-003',
                    question: '기업 정산은 어떻게 이루어지나요?',
                    answer: '기업 고객은 월말 정산 또는 분기별 정산을 선택할 수 있습니다. 세금계산서 발행, 상세 배송 내역서 제공, 부서별 비용 분석 리포트 등을 포함합니다. 정산 시스템을 통해 실시간으로 사용 현황을 확인할 수 있습니다.',
                    category: 'billing',
                    targetUsers: ['corporate'],
                    priority: 3,
                    views: 290
                },
                
                // 공통 FAQ
                {
                    id: 'common-001',
                    question: '배송 추적은 어떻게 하나요?',
                    answer: '주문 완료 후 제공되는 송장번호로 실시간 배송 추적이 가능합니다. 웹사이트 또는 모바일 앱에서 송장번호를 입력하면 현재 배송 상태, 예상 도착 시간을 확인할 수 있습니다. SMS 알림 서비스도 제공합니다.',
                    category: 'shipping',
                    targetUsers: ['general', 'corporate'],
                    priority: 1,
                    views: 2100
                },
                {
                    id: 'common-002',
                    question: '배송이 지연되면 어떻게 하나요?',
                    answer: '배송 지연 시 SMS 또는 이메일로 알림을 드립니다. 통관 지연, 천재지변 등 불가항력적 사유를 제외한 당사 책임 지연의 경우 배송비 환불 또는 차회 배송 할인을 제공합니다. 고객센터로 문의해주시면 즉시 처리해드립니다.',
                    category: 'shipping',
                    targetUsers: ['general', 'corporate'],
                    priority: 2,
                    views: 1800
                },
                {
                    id: 'common-003',
                    question: '결제는 어떤 방법을 사용할 수 있나요?',
                    answer: '현재는 무통장 입금만 지원합니다. 주문 완료 후 24시간 내 지정 계좌로 입금해주시면 됩니다. 입금 확인 후 즉시 배송 접수 처리됩니다. 향후 신용카드, 간편결제 등 다양한 결제 수단을 추가할 예정입니다.',
                    category: 'billing',
                    targetUsers: ['general', 'corporate'],
                    priority: 3,
                    views: 1650
                },
                {
                    id: 'common-004',
                    question: '금지 품목은 어떤 것들이 있나요?',
                    answer: '위험물(폭발물, 인화성 물질), 생물(동식물), 액체류, 의약품, 전자제품(리튬배터리 포함), 현금 및 귀중품, 음식물 등은 배송이 제한됩니다. 자세한 금지 품목 리스트는 배송 접수 시 확인하실 수 있습니다.',
                    category: 'shipping',
                    targetUsers: ['general', 'corporate'],
                    priority: 4,
                    views: 1320
                },
                {
                    id: 'common-005',
                    question: '시스템 사용법을 알고 싶어요.',
                    answer: '시스템 사용법은 각 페이지의 도움말을 참고하시거나, 워크플로우 시뮬레이터를 이용해 전체 배송 프로세스를 미리 체험해보실 수 있습니다. 추가 문의는 고객센터(1588-0000)로 연락해주세요.',
                    category: 'technical',
                    targetUsers: ['general', 'corporate'],
                    priority: 5,
                    views: 980
                }
            ];
        }

        // 카테고리 정보 가져오기
        function getCategories() {
            const baseCategories = [
                { id: 'all', name: '전체', description: '모든 FAQ', icon: 'help-circle' },
                { id: 'shipping', name: '배송', description: '배송 관련', icon: 'package' },
                { id: 'billing', name: '결제/정산', description: '비용 관련', icon: 'credit-card' },
                { id: 'service', name: '서비스', description: '서비스 이용', icon: 'truck' },
                { id: 'technical', name: '기술지원', description: '시스템 사용법', icon: 'file-text' }
            ];

            if (currentUser.type === 'corporate') {
                return [
                    ...baseCategories,
                    { id: 'corporate', name: '기업전용', description: '기업 고객 전용', icon: 'building-2' }
                ];
            } else if (currentUser.type === 'general') {
                return [
                    ...baseCategories,
                    { id: 'general', name: '개인고객', description: '개인 고객 전용', icon: 'user' }
                ];
            } else {
                return [
                    ...baseCategories,
                    { id: 'corporate', name: '기업전용', description: '기업 고객 전용', icon: 'building-2' },
                    { id: 'general', name: '개인고객', description: '개인 고객 전용', icon: 'user' }
                ];
            }
        }

        // 필터링된 FAQ 가져오기
        function getFilteredFAQs() {
            let filtered = faqs;

            // 사용자 타입에 따른 필터링
            if (currentUser) {
                filtered = filtered.filter(faq => 
                    faq.targetUsers.includes(currentUser.type)
                );
            }

            // 카테고리 필터링
            if (selectedCategory !== 'all') {
                filtered = filtered.filter(faq => faq.category === selectedCategory);
            }

            // 검색 필터링
            if (searchTerm) {
                filtered = filtered.filter(faq =>
                    faq.question.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    faq.answer.toLowerCase().includes(searchTerm.toLowerCase())
                );
            }

            // 우선순위 및 조회수로 정렬
            return filtered.sort((a, b) => {
                if (a.priority !== b.priority) {
                    return a.priority - b.priority;
                }
                return b.views - a.views;
            });
        }

        // 카테고리별 FAQ 수 계산
        function getCategoryCount(categoryId) {
            if (categoryId === 'all') return getFilteredFAQs().length;
            return faqs.filter(faq => {
                if (currentUser && !faq.targetUsers.includes(currentUser.type)) return false;
                return faq.category === categoryId;
            }).length;
        }

        // 카테고리 텍스트 가져오기
        function getCategoryText(category) {
            switch (category) {
                case 'shipping': return '배송';
                case 'billing': return '결제/정산';
                case 'service': return '서비스';
                case 'technical': return '기술지원';
                case 'corporate': return '기업전용';
                case 'general': return '개인고객';
                default: return '기타';
            }
        }

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            initializeFAQs();
            lucide.createIcons();
            updateUserInfo();
            renderCategoryFilters();
            renderFAQs();
        });

        // 사용자 정보 업데이트
        function updateUserInfo() {
            const userIcon = document.getElementById('userIcon');
            const userCardTitle = document.getElementById('userCardTitle');
            const userCard = document.getElementById('userInfoCard');
            const userName = document.getElementById('userName');
            const userTypeBadge = document.getElementById('userTypeBadge');
            const inquiryInfo = document.getElementById('inquiryInfo');
            
            if (currentUser.type === 'corporate') {
                userIcon.setAttribute('data-lucide', 'building-2');
                userCardTitle.textContent = '기업 고객 맞춤 FAQ';
                userCard.className = 'bg-white rounded-lg shadow-blue border border-blue-100 bg-orange-50/30 p-6';
                userName.textContent = currentUser.name;
                userTypeBadge.textContent = '기업 고객';
                userTypeBadge.className = 'badge border-orange-300 text-orange-700';
                inquiryInfo.textContent = '• 사업자등록번호';
                
                // 색상 변경
                document.querySelectorAll('#userNameLabel, #userTypeLabel, #customFaqLabel').forEach(el => {
                    el.className = 'text-sm text-orange-700';
                });
                document.getElementById('customFaqCount').className = 'font-medium text-orange-600';
            } else {
                userIcon.setAttribute('data-lucide', 'user');
                userCardTitle.textContent = '개인 고객 맞춤 FAQ';
                userCard.className = 'bg-white rounded-lg shadow-blue border border-blue-100 bg-blue-50/30 p-6';
                userName.textContent = currentUser.name;
                userTypeBadge.textContent = '개인 고객';
                userTypeBadge.className = 'badge border-blue-300 text-blue-700';
                inquiryInfo.textContent = '• 회원 이메일 주소';
                
                // 색상 유지
                document.querySelectorAll('#userNameLabel, #userTypeLabel, #customFaqLabel').forEach(el => {
                    el.className = 'text-sm text-blue-700';
                });
                document.getElementById('customFaqCount').className = 'font-medium text-blue-600';
            }
            
            lucide.createIcons();
        }

        // 카테고리 필터 렌더링
        function renderCategoryFilters() {
            const container = document.getElementById('categoryFilters');
            const categories = getCategories();
            
            container.innerHTML = categories.map(category => `
                <button
                    class="category-button flex items-center gap-2 h-auto py-3 px-4 rounded-md text-sm ${selectedCategory === category.id ? 'active' : ''}"
                    onclick="selectCategory('${category.id}')"
                >
                    <i data-lucide="${category.icon}" class="h-4 w-4"></i>
                    <div class="text-left">
                        <div class="font-medium">${category.name}</div>
                        <div class="text-xs opacity-70">
                            ${getCategoryCount(category.id)}개
                        </div>
                    </div>
                </button>
            `).join('');
            
            lucide.createIcons();
        }

        // 카테고리 선택
        function selectCategory(categoryId) {
            selectedCategory = categoryId;
            renderCategoryFilters();
            renderFAQs();
        }

        // FAQ 렌더링
        function renderFAQs() {
            const container = document.getElementById('faqContainer');
            const filteredFAQs = getFilteredFAQs();
            
            // 제목 업데이트
            const subtitle = document.getElementById('faqSubtitle');
            const userTypeText = currentUser.type === 'corporate' ? '기업 고객' : 
                               currentUser.type === 'general' ? '개인 고객' : '전체';
            subtitle.textContent = `${userTypeText} 대상 FAQ - 총 ${filteredFAQs.length}개`;
            
            // 맞춤 FAQ 수 업데이트
            document.getElementById('customFaqCount').textContent = `${filteredFAQs.length}개 제공`;
            
            if (filteredFAQs.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-lg shadow-blue border border-blue-100 p-8 text-center">
                        <i data-lucide="help-circle" class="h-12 w-12 text-blue-300 mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium text-blue-900 mb-2">FAQ가 없습니다</h3>
                        <p class="text-blue-600">
                            ${searchTerm ? '검색 조건에 맞는 FAQ가 없습니다.' : '현재 등록된 FAQ가 없습니다.'}
                        </p>
                    </div>
                `;
            } else {
                const userTypeText = currentUser.type === 'corporate' ? '기업 고객' : 
                                   currentUser.type === 'general' ? '개인 고객' : '전체';
                
                container.innerHTML = `
                    <div class="bg-white rounded-lg shadow-blue border border-blue-100">
                        <div class="p-6 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-blue-900 flex items-center gap-2">
                                <i data-lucide="help-circle" class="h-5 w-5"></i>
                                ${userTypeText} FAQ 목록
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-2">
                                ${filteredFAQs.map(faq => `
                                    <div class="accordion-item">
                                        <button class="accordion-trigger" onclick="toggleAccordion('${faq.id}')">
                                            <div class="flex-1">
                                                <div class="flex items-center gap-2 mb-1">
                                                    <span class="badge">${getCategoryText(faq.category)}</span>
                                                    <span class="badge text-gray-600">
                                                        조회 ${faq.views.toLocaleString()}
                                                    </span>
                                                </div>
                                                <div class="font-medium text-blue-900">${faq.question}</div>
                                            </div>
                                            <i data-lucide="chevron-down" class="h-5 w-5 accordion-arrow" id="arrow-${faq.id}"></i>
                                        </button>
                                        <div class="accordion-content" id="content-${faq.id}">
                                            <div class="bg-blue-50/50 rounded-lg p-4 leading-relaxed text-blue-700">
                                                ${faq.answer}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
            
            lucide.createIcons();
        }

        // 아코디언 토글
        function toggleAccordion(faqId) {
            const content = document.getElementById(`content-${faqId}`);
            const arrow = document.getElementById(`arrow-${faqId}`);
            const trigger = content.previousElementSibling;
            
            // 다른 모든 아코디언 닫기
            document.querySelectorAll('.accordion-content').forEach(el => {
                if (el.id !== `content-${faqId}`) {
                    el.classList.remove('show');
                    el.previousElementSibling.classList.remove('active');
                    const otherArrow = el.previousElementSibling.querySelector('.accordion-arrow');
                    if (otherArrow) otherArrow.classList.remove('rotate');
                }
            });
            
            // 현재 아코디언 토글
            const isOpen = content.classList.contains('show');
            if (isOpen) {
                content.classList.remove('show');
                trigger.classList.remove('active');
                arrow.classList.remove('rotate');
            } else {
                content.classList.add('show');
                trigger.classList.add('active');
                arrow.classList.add('rotate');
            }
        }

        // 검색 처리
        function handleSearch() {
            searchTerm = document.getElementById('searchInput').value;
            renderFAQs();
        }

        // 뒤로가기
        function navigateBack() {
            if (currentUser.type === 'admin') {
                console.log('Navigate to admin dashboard');
                alert('관리자 대시보드로 이동합니다.');
            } else if (currentUser.type === 'partner') {
                console.log('Navigate to partner dashboard');
                alert('파트너 대시보드로 이동합니다.');
            } else {
                console.log('Navigate to dashboard');
                alert('대시보드로 이동합니다.');
            }
        }

        // 사용자 타입 변경 (데모용)
        function changeUserType(type) {
            currentUser.type = type;
            selectedCategory = 'all'; // 카테고리 리셋
            updateUserInfo();
            renderCategoryFilters();
            renderFAQs();
        }

        // 데모용 - 키보드 단축키
        document.addEventListener('keydown', function(e) {
            if (e.key === '1') changeUserType('general');
            if (e.key === '2') changeUserType('corporate');
        });
    </script>
</body>
</html>