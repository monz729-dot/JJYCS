<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YCS 물류 시스템 - 회원가입</title>
    <link rel="stylesheet" href="css/globals.css">
    <style>
        .auth-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 2rem 1rem;
        }
        
        .auth-card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 500px;
            margin: 0 auto;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--primary-100);
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .auth-logo {
            width: 60px;
            height: 60px;
            background: var(--primary-500);
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem auto;
            color: white;
            font-size: 1.25rem;
            font-weight: bold;
        }
        
        .auth-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-800);
            margin-bottom: 0.5rem;
        }
        
        .auth-subtitle {
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .user-type-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-bottom: 2rem;
        }
        
        .user-type-option {
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
        }
        
        .user-type-option:hover {
            border-color: var(--primary-300);
            background: var(--primary-50);
        }
        
        .user-type-option.selected {
            border-color: var(--primary-500);
            background: var(--primary-50);
        }
        
        .user-type-option.general.selected {
            border-color: var(--primary-500);
            background: var(--primary-50);
        }
        
        .user-type-option.corporate.selected {
            border-color: #f97316;
            background: #fff7ed;
        }
        
        .user-type-option.partner.selected {
            border-color: #8b5cf6;
            background: #f5f3ff;
        }
        
        .user-type-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
        }
        
        .user-type-desc {
            font-size: 0.75rem;
            color: #6b7280;
            line-height: 1.3;
        }
        
        .form-section {
            background: #f8fafc;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--primary-100);
        }
        
        .form-section-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-800);
            margin-bottom: 1rem;
        }
        
        .form-row {
            display: block;
            margin-bottom: 1rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        .form-label.required::after {
            content: ' *';
            color: var(--danger-500);
        }
        
        .form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid #e5e7eb !important;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            background: white;
            box-sizing: border-box;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid #e5e7eb !important;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            background: white;
            cursor: pointer;
        }
        
        .form-textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid #e5e7eb !important;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
            box-sizing: border-box;
        }
        
        .form-hint {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }
        
        .business-info {
            display: none;
        }
        
        .business-info.show {
            display: block;
        }
        
        .agreement-section {
            background: white;
            border: 1px solid var(--primary-200);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .agreement-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
        }
        
        .agreement-item:hover {
            background: var(--primary-50);
        }
        
        .agreement-checkbox {
            width: 1.125rem;
            height: 1.125rem;
            accent-color: var(--primary-500);
        }
        
        .agreement-text {
            flex: 1;
            font-size: 0.875rem;
            color: #374151;
        }
        
        .agreement-required {
            color: var(--danger-500);
            font-weight: 500;
        }
        
        .agreement-link {
            color: var(--primary-600);
            text-decoration: none;
            font-size: 0.8rem;
        }
        
        .agreement-link:hover {
            text-decoration: underline;
        }
        
        .register-btn {
            width: 100%;
            background: var(--primary-500);
            color: white;
            padding: 1rem;
            border-radius: 0.75rem;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 1rem;
        }
        
        .register-btn:hover {
            background: var(--primary-600);
            transform: translateY(-1px);
        }
        
        .register-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        
        .auth-links {
            text-align: center;
        }
        
        .auth-link {
            color: var(--primary-600);
            text-decoration: none;
            font-size: 0.875rem;
        }
        
        .auth-link:hover {
            text-decoration: underline;
        }
        
        .verify-btn {
            background: var(--primary-500);
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.875rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            min-width: 80px;
        }
        
        .verify-btn:hover {
            background: var(--primary-600);
        }
        
        .verify-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .file-upload-container {
            position: relative;
            border: 2px dashed #d1d5db;
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.2s ease;
            background: #f9fafb;
        }
        
        .file-upload-container:hover {
            border-color: var(--primary-300);
            background: var(--primary-50);
        }
        
        .file-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            padding: 0 !important;
            border: none !important;
        }
        
        .file-upload-hint {
            pointer-events: none;
        }
        
        .file-upload-hint span {
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 500;
        }
        
        .file-preview {
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: var(--primary-50);
            border-radius: 0.5rem;
            border: 1px solid var(--primary-200);
        }
        
        .file-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .file-name {
            font-size: 0.875rem;
            color: var(--primary-700);
            font-weight: 500;
        }
        
        .file-remove {
            background: var(--danger-500);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 1rem;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .file-remove:hover {
            background: var(--danger-600);
        }
        
        .approval-notice {
            display: none;
            background: #fff7ed;
            border: 1px solid #fed7aa;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .approval-notice.show {
            display: block;
        }
        
        .approval-notice-title {
            font-weight: 600;
            color: #ea580c;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .approval-notice-text {
            font-size: 0.8rem;
            color: #9a3412;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .auth-container {
                padding: 1rem 0.5rem;
            }
            
            .auth-card {
                padding: 1.5rem;
            }
            
            .user-type-selector {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
            
            .form-section {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <div class="auth-logo">YCS</div>
                <h1 class="auth-title">회원가입</h1>
                <p class="auth-subtitle">YCS 물류 시스템에 가입하고 전문 배송 서비스를 이용하세요</p>
            </div>
            
            <!-- 회원 유형 선택 -->
            <div class="user-type-selector">
                <div class="user-type-option general" onclick="selectUserType('general')">
                    <div class="user-type-title">개인 고객</div>
                    <div class="user-type-desc">개인 고객용 일반 배송 서비스</div>
                </div>
                <div class="user-type-option corporate" onclick="selectUserType('corporate')">
                    <div class="user-type-title">기업 고객</div>
                    <div class="user-type-desc">기업용 전문 물류 서비스</div>
                </div>
                <div class="user-type-option partner" onclick="selectUserType('partner')">
                    <div class="user-type-title">파트너</div>
                    <div class="user-type-desc">제휴 마케팅 파트너</div>
                </div>
            </div>
            
            <form class="auth-form" id="registerForm">
                <input type="hidden" id="userType" value="">
                
                <!-- 기본 정보 -->
                <div class="form-section">
                    <div class="form-section-title">기본 정보</div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="name">이름</label>
                        <input type="text" class="form-input" id="name" placeholder="홍길동" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="phone">연락처</label>
                        <input type="tel" class="form-input" id="phone" placeholder="010-1234-5678" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="email">이메일</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="email" class="form-input" id="email" placeholder="example@email.com" required style="flex: 1;">
                            <button type="button" class="verify-btn" id="sendVerifyBtn">인증요청</button>
                        </div>
                        <div class="form-hint">로그인 ID로 사용됩니다</div>
                    </div>
                    
                    <div class="form-group" id="verifyCodeGroup" style="display: none;">
                        <label class="form-label required" for="verifyCode">인증코드</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" class="form-input" id="verifyCode" placeholder="인증코드 6자리 입력" maxlength="6" style="flex: 1;">
                            <button type="button" class="verify-btn" id="confirmVerifyBtn">인증확인</button>
                        </div>
                        <div class="form-hint">
                            <span id="verifyTimer" style="color: #ef4444;"></span>
                            <span id="verifyStatus"></span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="password">비밀번호</label>
                        <input type="password" class="form-input" id="password" placeholder="8자 이상 입력" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="passwordConfirm">비밀번호 확인</label>
                        <input type="password" class="form-input" id="passwordConfirm" placeholder="비밀번호 재입력" required>
                    </div>
                </div>
                
                <!-- 기업/파트너 정보 -->
                <div class="form-section business-info" id="businessInfo">
                    <div class="form-section-title">사업자 정보</div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="companyName">회사명</label>
                        <input type="text" class="form-input" id="companyName" placeholder="(주)회사명">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="businessNumber">사업자등록번호</label>
                        <input type="text" class="form-input" id="businessNumber" placeholder="123-45-67890">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="contactPerson">담당자명</label>
                        <input type="text" class="form-input" id="contactPerson" placeholder="담당자 이름">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="contactPhone">담당자 연락처</label>
                        <input type="tel" class="form-input" id="contactPhone" placeholder="010-0000-0000">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="address">회사 주소</label>
                        <input type="text" class="form-input" id="address" placeholder="서울시 강남구...">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required" for="businessLicense">사업자등록증</label>
                        <div class="file-upload-container">
                            <input type="file" class="form-input file-input" id="businessLicense" accept="image/*,.pdf" required>
                            <div class="file-upload-hint">
                                <span>사업자등록증을 업로드해주세요 (이미지 또는 PDF)</span>
                            </div>
                        </div>
                        <div class="file-preview" id="licensePreview" style="display: none;">
                            <div class="file-info">
                                <span class="file-name" id="licenseName"></span>
                                <button type="button" class="file-remove" id="licenseRemove">×</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="approval-notice" id="approvalNotice">
                        <div class="approval-notice-title">승인 안내</div>
                        <div class="approval-notice-text">
                            기업 고객 및 파트너 가입은 관리자 승인이 필요합니다.<br>
                            • 승인 기간: 평일 기준 1~2일<br>
                            • 승인 완료 시 이메일로 안내드립니다.<br>
                            • 추가 서류가 필요할 경우 별도 연락드립니다.
                        </div>
                    </div>
                </div>
                
                <!-- 약관 동의 -->
                <div class="agreement-section">
                    <div class="agreement-item">
                        <input type="checkbox" class="agreement-checkbox" id="agreeAll">
                        <label class="agreement-text" for="agreeAll">
                            <strong>전체 동의</strong>
                        </label>
                    </div>
                    
                    <div class="agreement-item">
                        <input type="checkbox" class="agreement-checkbox" id="agreeTerms" required>
                        <label class="agreement-text" for="agreeTerms">
                            <span class="agreement-required">[필수]</span> 서비스 이용약관에 동의합니다
                        </label>
                        <a href="#" class="agreement-link">보기</a>
                    </div>
                    
                    <div class="agreement-item">
                        <input type="checkbox" class="agreement-checkbox" id="agreePrivacy" required>
                        <label class="agreement-text" for="agreePrivacy">
                            <span class="agreement-required">[필수]</span> 개인정보 처리방침에 동의합니다
                        </label>
                        <a href="#" class="agreement-link">보기</a>
                    </div>
                    
                    <div class="agreement-item">
                        <input type="checkbox" class="agreement-checkbox" id="agreeMarketing">
                        <label class="agreement-text" for="agreeMarketing">
                            [선택] 마케팅 정보 수신에 동의합니다
                        </label>
                    </div>
                </div>
                
                <button type="submit" class="register-btn" id="registerBtn" disabled>가입하기</button>
            </form>
            
            <div class="auth-links">
                <span style="color: #6b7280;">이미 계정이 있으신가요?</span>
                <a href="auth-login.html" class="auth-link">로그인</a>
            </div>
        </div>
    </div>

    <script>
        let selectedUserType = '';
        let emailVerified = false;
        let verificationCode = '';
        let verificationTimer = null;
        let verificationTimeLeft = 0;

        // 회원 유형 선택
        function selectUserType(type) {
            selectedUserType = type;
            document.getElementById('userType').value = type;
            
            // 모든 옵션에서 selected 클래스 제거
            document.querySelectorAll('.user-type-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // 선택된 옵션에 selected 클래스 추가
            document.querySelector(`.user-type-option.${type}`).classList.add('selected');
            
            // 기업/파트너인 경우 사업자 정보 입력 폼 표시
            const businessInfo = document.getElementById('businessInfo');
            const approvalNotice = document.getElementById('approvalNotice');
            
            if (type === 'corporate' || type === 'partner') {
                businessInfo.classList.add('show');
                approvalNotice.classList.add('show');
                
                // 필수 필드 설정
                document.getElementById('companyName').required = true;
                document.getElementById('businessNumber').required = true;
                document.getElementById('businessLicense').required = true;
            } else {
                businessInfo.classList.remove('show');
                approvalNotice.classList.remove('show');
                
                // 필수 필드 해제
                document.getElementById('companyName').required = false;
                document.getElementById('businessNumber').required = false;
                document.getElementById('businessLicense').required = false;
            }
            
            updateRegisterButton();
        }

        // 전체 동의 체크박스
        document.getElementById('agreeAll').addEventListener('change', function() {
            const checkboxes = ['agreeTerms', 'agreePrivacy', 'agreeMarketing'];
            checkboxes.forEach(id => {
                document.getElementById(id).checked = this.checked;
            });
            updateRegisterButton();
        });

        // 개별 약관 동의
        ['agreeTerms', 'agreePrivacy', 'agreeMarketing'].forEach(id => {
            document.getElementById(id).addEventListener('change', function() {
                const allRequired = document.getElementById('agreeTerms').checked && 
                                  document.getElementById('agreePrivacy').checked;
                const allOptional = document.getElementById('agreeMarketing').checked;
                
                document.getElementById('agreeAll').checked = allRequired && allOptional;
                updateRegisterButton();
            });
        });

        // 이메일 인증코드 전송
        function sendVerificationCode() {
            const email = document.getElementById('email').value;
            if (!email) {
                alert('이메일을 입력해주세요.');
                return;
            }
            
            // 이메일 유효성 검사
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('올바른 이메일 형식을 입력해주세요.');
                return;
            }
            
            // 인증코드 생성 (6자리 숫자)
            verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            
            // 인증코드 입력란 표시
            document.getElementById('verifyCodeGroup').style.display = 'block';
            document.getElementById('sendVerifyBtn').disabled = true;
            document.getElementById('sendVerifyBtn').textContent = '전송완료';
            
            // 타이머 시작 (5분)
            verificationTimeLeft = 300;
            startVerificationTimer();
            
            // 실제로는 서버에 이메일 전송 요청을 해야 하지만, 데모용으로 콘솔에 출력
            console.log(`인증코드: ${verificationCode} (실제 서비스에서는 ${email}로 전송됩니다)`);
            
            document.getElementById('verifyStatus').textContent = '인증코드가 이메일로 전송되었습니다.';
            document.getElementById('verifyStatus').style.color = '#059669';
        }
        
        // 인증 타이머
        function startVerificationTimer() {
            const timerElement = document.getElementById('verifyTimer');
            
            verificationTimer = setInterval(function() {
                const minutes = Math.floor(verificationTimeLeft / 60);
                const seconds = verificationTimeLeft % 60;
                timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                verificationTimeLeft--;
                
                if (verificationTimeLeft < 0) {
                    clearInterval(verificationTimer);
                    timerElement.textContent = '';
                    document.getElementById('sendVerifyBtn').disabled = false;
                    document.getElementById('sendVerifyBtn').textContent = '재전송';
                    document.getElementById('verifyStatus').textContent = '인증시간이 만료되었습니다. 다시 요청해주세요.';
                    document.getElementById('verifyStatus').style.color = '#ef4444';
                    verificationCode = '';
                }
            }, 1000);
        }
        
        // 인증코드 확인
        function confirmVerificationCode() {
            const inputCode = document.getElementById('verifyCode').value;
            if (!inputCode) {
                alert('인증코드를 입력해주세요.');
                return;
            }
            
            if (inputCode === verificationCode) {
                emailVerified = true;
                clearInterval(verificationTimer);
                document.getElementById('verifyTimer').textContent = '';
                document.getElementById('verifyStatus').textContent = '이메일 인증이 완료되었습니다.';
                document.getElementById('verifyStatus').style.color = '#059669';
                document.getElementById('confirmVerifyBtn').disabled = true;
                document.getElementById('confirmVerifyBtn').textContent = '인증완료';
                document.getElementById('verifyCode').disabled = true;
                document.getElementById('email').disabled = true;
                updateRegisterButton();
            } else {
                alert('인증코드가 일치하지 않습니다.');
                document.getElementById('verifyCode').focus();
            }
        }
        
        // 가입 버튼 활성화 상태 업데이트
        function updateRegisterButton() {
            const requiredAgreements = document.getElementById('agreeTerms').checked && 
                                     document.getElementById('agreePrivacy').checked;
            const userTypeSelected = selectedUserType !== '';
            
            // 기업/파트너인 경우 사업자등록증 필수
            let businessLicenseUploaded = true;
            if (selectedUserType === 'corporate' || selectedUserType === 'partner') {
                const businessLicense = document.getElementById('businessLicense');
                businessLicenseUploaded = businessLicense.files.length > 0;
            }
            
            const registerBtn = document.getElementById('registerBtn');
            registerBtn.disabled = !(requiredAgreements && userTypeSelected && emailVerified && businessLicenseUploaded);
        }

        // 비밀번호 확인
        document.getElementById('passwordConfirm').addEventListener('blur', function() {
            const password = document.getElementById('password').value;
            const passwordConfirm = this.value;
            
            if (password && passwordConfirm && password !== passwordConfirm) {
                this.style.borderColor = '#ef4444';
                if (!document.querySelector('.password-error')) {
                    const errorMsg = document.createElement('div');
                    errorMsg.className = 'form-hint password-error';
                    errorMsg.style.color = '#ef4444';
                    errorMsg.textContent = '비밀번호가 일치하지 않습니다.';
                    this.parentNode.appendChild(errorMsg);
                }
            } else {
                this.style.borderColor = '#d1d5db';
                const errorMsg = document.querySelector('.password-error');
                if (errorMsg) {
                    errorMsg.remove();
                }
            }
        });

        // 이메일 인증 버튼 이벤트
        document.getElementById('sendVerifyBtn').addEventListener('click', sendVerificationCode);
        document.getElementById('confirmVerifyBtn').addEventListener('click', confirmVerificationCode);

        // 사업자등록증 파일 업로드
        document.getElementById('businessLicense').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const preview = document.getElementById('licensePreview');
            const fileName = document.getElementById('licenseName');
            
            if (file) {
                // 파일 크기 체크 (5MB 제한)
                if (file.size > 5 * 1024 * 1024) {
                    alert('파일 크기는 5MB 이하여야 합니다.');
                    e.target.value = '';
                    return;
                }
                
                // 파일 타입 체크
                const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];
                if (!allowedTypes.includes(file.type)) {
                    alert('JPG, PNG, PDF 파일만 업로드 가능합니다.');
                    e.target.value = '';
                    return;
                }
                
                fileName.textContent = file.name;
                preview.style.display = 'block';
                updateRegisterButton();
            } else {
                preview.style.display = 'none';
                updateRegisterButton();
            }
        });

        // 파일 삭제
        document.getElementById('licenseRemove').addEventListener('click', function() {
            document.getElementById('businessLicense').value = '';
            document.getElementById('licensePreview').style.display = 'none';
            updateRegisterButton();
        });

        // 회원가입 폼 제출
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 이메일 인증 확인
            if (!emailVerified) {
                alert('이메일 인증을 완료해주세요.');
                return;
            }
            
            const formData = new FormData(this);
            const userData = {
                type: selectedUserType,
                name: formData.get('name') || document.getElementById('name').value,
                email: formData.get('email') || document.getElementById('email').value,
                phone: formData.get('phone') || document.getElementById('phone').value,
                password: formData.get('password') || document.getElementById('password').value,
                createdAt: new Date().toISOString()
            };

            // 기업/파트너 정보 추가
            if (selectedUserType === 'corporate' || selectedUserType === 'partner') {
                const businessLicense = document.getElementById('businessLicense').files[0];
                
                // 사업자등록증 필수 체크
                if (!businessLicense) {
                    alert('사업자등록증을 업로드해주세요.');
                    return;
                }
                
                userData.companyName = document.getElementById('companyName').value;
                userData.businessNumber = document.getElementById('businessNumber').value;
                userData.contactPerson = document.getElementById('contactPerson').value;
                userData.contactPhone = document.getElementById('contactPhone').value;
                userData.address = document.getElementById('address').value;
                userData.businessLicense = {
                    name: businessLicense.name,
                    size: businessLicense.size,
                    type: businessLicense.type,
                    uploadedAt: new Date().toISOString()
                };
                userData.status = 'pending'; // 승인 대기
            } else {
                userData.status = 'approved'; // 일반 회원은 즉시 승인
            }

            // 가입 처리 시뮬레이션
            const existingUsers = JSON.parse(localStorage.getItem('ycs_users') || '[]');
            
            // 이메일 중복 체크
            if (existingUsers.find(user => user.email === userData.email)) {
                alert('이미 가입된 이메일입니다.');
                return;
            }

            // 사용자 추가
            existingUsers.push(userData);
            localStorage.setItem('ycs_users', JSON.stringify(existingUsers));

            // 가입 완료 처리
            if (selectedUserType === 'corporate' || selectedUserType === 'partner') {
                alert(`가입 신청이 완료되었습니다.\n\n관리자 승인 후 이용 가능합니다.\n승인 기간: 평일 기준 1~2일\n\n승인 완료 시 ${userData.email}로 안내드립니다.`);
            } else {
                alert('가입이 완료되었습니다!\n로그인 페이지로 이동합니다.');
            }
            
            window.location.href = 'auth-login.html';
        });

        // 사업자등록번호 포맷팅
        document.getElementById('businessNumber').addEventListener('input', function() {
            let value = this.value.replace(/[^\d]/g, '');
            if (value.length > 3 && value.length <= 5) {
                value = value.slice(0, 3) + '-' + value.slice(3);
            } else if (value.length > 5) {
                value = value.slice(0, 3) + '-' + value.slice(3, 5) + '-' + value.slice(5, 10);
            }
            this.value = value;
        });

        // 전화번호 포맷팅
        ['phone', 'contactPhone'].forEach(id => {
            document.getElementById(id).addEventListener('input', function() {
                let value = this.value.replace(/[^\d]/g, '');
                if (value.length > 3 && value.length <= 7) {
                    value = value.slice(0, 3) + '-' + value.slice(3);
                } else if (value.length > 7) {
                    value = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
                }
                this.value = value;
            });
        });
    </script>
</body>
</html>